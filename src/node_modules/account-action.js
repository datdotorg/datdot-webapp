const style_sheet = require('support-style-sheet')
const message_maker = require('message-maker')
const make_grid = require('make-grid')
const make_element = require('make-element')
const {i_button} = require('components/datdot-ui-button')

module.exports = account_actions

function account_actions (opt, protocol) {
    const {page = '*', flow = 'account-action', name = '.', body = [], expanded = undefined, to = '#'} = opt
    const recipients = []
    const make = message_maker(`${name} / ${flow} / ${page}`)
    const is_expanded = expanded
    console.log(expanded)

    function widget () {
        const send = protocol(get)
        const el = make_element({name: 'div', classlist: 'sub-action account'})
        const title = make_element({name: 'h5'})
        const shadow = el.attachShadow({mode: 'closed'})
        style_sheet(shadow, style)
        title.textContent = 'account actions'
        shadow.append(title)
        send( make({type: 'ready'}) )

        if (is_expanded) set_attr({aria: 'expanded', prop: is_expanded})

        return el

        function set_attr ({aria, prop}) {
            el.setAttribute(`aria-${aria}`, prop)
        }
        function action_protocol (name) {
            return send => {
                recipients[name] = send
                return get
            }
        }

        function get (msg) {

        }
    }

    const style = `
    h1 {
        color: hsl(var(--color-flame))
    }
    `

    return widget()
}