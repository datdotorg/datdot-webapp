const style_sheet = require('support-style-sheet')
const make_grid = require('make-grid')
const message_maker = require('message-maker')
const make_element = require('make-element')
const {i_button} = require('components/datdot-ui-button')
const i_icon = require('components/datdot-ui-icon/src')

module.exports = i_card

function i_card (opt, protocol) {
    const {flow = "ui-card", name = ".", body = undefined, to = '#', theme} = opt
    const recipients = []
    const make = message_maker(`${name} / ${flow}`)
    
    function widget () {
        const send = protocol(get)
        const el = make_element({name: 'i-card', classlist: 'card'})
        const shadow = el.attachShadow({mode: 'closed'})
        const header = make_element({name: 'div', classlist: 'card-header'})
        const content = make_element({name: 'div', classlist: 'card-content'})
        const footer = make_element({name: 'div', classlist: 'card-footer'})
        const title = make_element({name: 'h3', classlist: 'title'})
        const avatars = ['plan1', 'user1']
        const plan_avatar = i_icon({name: 'plan1', path: 'https://avatars.dicebear.com/api/identicon/'})
        const user_avatar = i_icon({name: 'user1', path: 'https://avatars.dicebear.com/api/avataaars/'})
        plan_avatar.classList.add('avatar-plan')
        user_avatar.classList.add('avatar-user')
        title.innerText = 'plan1'
        header.append(plan_avatar, title, user_avatar)
        style_sheet(shadow, style)
        shadow.append(header, content, footer)
        send(make({type: 'ready'}))
        return el

        function get (msg) {
            
        }
        
    }

    const style = `
    :host(i-card) {
        display: grid;
        width: 178px;
    }
    .card-header {
        display: flex;
        justify-content: space-between;
    }
    .card-header .icon {
        display: grid;
        align-items: center;
        justify-items: center;
        width: 24px;
        height: 24px;
        border-radius: 50px;
        background-color: hsl(var(--color-white));
    }
    .card-header .avatar-plan svg {
        width: 16px;
        height: 16px;
    }

    .card-header .avatar-user svg {
        width: 32px;
        height: 32px;
    }
    `
    return widget()
}