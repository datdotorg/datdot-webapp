const bel = require('bel')
const Chart = require('chart.js');
const style_sheet = require('support-style-sheet')
const make_grid = require('make-grid')
const make_element = require('./make-element')
const message_maker = require('message-maker')

module.exports = line_chart
function line_chart () {

  function widget() {
    const el = make_element({name: 'div', classlist: 'chart-section'})
    const shadow = el.attachShadow({mode: 'closed'})
    const canvas = bel`<canvas></canvas>`
    style_sheet(shadow, style)
    

    const data = {
      labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
      datasets: [{
        label: 'Looping tension',
        data: [65, 59, 80, 81, 26, 55, 40]
      }]
    }

    const chartOptions = {
      legend: {
        display: true,
        position: 'top',
        labels: {
          boxWidth: 80,
          fontColor: 'black'
        },
        responsive: true
      }
    }

    shadow.append(canvas)

    document.addEventListener('DOMContentLoaded', ()=> {
      const chart = new Chart(canvas, {
        type: 'line',
        data,
        options: chartOptions
      })
    })

    return el
  }
  
  const style = `
  :host() {
      
  }
  .chart-section {
    height: 100%
  }
  canvas {
    display: grid !important;
    width: 100% !important;
    height: 100% !important;
    background-color: hsl(var(--color-greyD9));
  }
  `
  return widget()
}